<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title><%= pagetitle %></title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
  <div class="container my-4">
    <h1><%= card.title %></h1>
    <p><strong>Descrição:</strong> <%= card.description %></p>
    <p><strong>Status:</strong> <%= card.status %></p>

    <hr />

    <h3>Tarefas do Card</h3>
    <% if (tasks.length === 0) { %>
      <p>Nenhuma tarefa associada a este card.</p>
    <% } else { %>
      <ul class="list-group">
        <% tasks.forEach(task => { %>
          <li class="list-group-item">
            <strong><%= task.task_name %></strong> - Prioridade: <%= task.priority || 'Nenhuma' %><br />
            <small><%= task.description %></small>
          </li>
        <% }) %>
      </ul>
    <% } %>

    <hr />

    <h3>Adicionar nova tarefa</h3>
    <form action="/admin/tasks" method="POST">
      <input type="hidden" name="cardId" value="<%= card.id %>" />
      <div class="mb-3">
        <label for="taskName" class="form-label">Nome da tarefa</label>
        <input type="text" id="taskName" name="taskName" class="form-control" required />
      </div>
      <div class="mb-3">
        <label for="description" class="form-label">Descrição</label>
        <textarea id="description" name="description" class="form-control"></textarea>
      </div>
      <div class="mb-3">
        <label for="priority" class="form-label">Prioridade</label>
        <select id="priority" name="priority" class="form-select">
          <option value="">Selecione</option>
          <option value="High">Alta</option>
          <option value="Medium">Média</option>
          <option value="Low">Baixa</option>
        </select>
      </div>
      <button type="submit" class="btn btn-primary">Criar Tarefa</button>
    </form>
  </div>
</body>
</html>
